# 时薪计算器应用需求文档

## 一、项目概述

时薪计算器是一款帮助用户准确计算实际时薪的娱乐型工具应用。本应用突破了传统时薪计算的简单模式，将影响时薪的多种隐性因素纳入考量，包括薪酬类型转换、生活成本、时间效率、通勤负担和绩效压力等。用户可以通过本应用全面了解自己的真实时薪价值，并发现一些"整活"成就。应用具备娱乐属性，通过趣味化的展示方式和成就系统，提升用户的使用体验。

---

## 二、产品形态与功能边界

### 2.1 MVP版本定位

本版本为最小可行产品（MVP），聚焦核心计算功能的实现，不包含任何非必要的附加功能。所有功能设计以"单机运行"为原则，确保用户无需注册账户、无需联网即可完整使用全部功能。

### 2.2 功能边界定义

| 功能模块 | MVP状态 | 说明 |
|----------|---------|------|
| 核心时薪计算 | ✅ 包含 | 支持多类型薪酬输入和综合因素调整 |
| Offer对比模式 | ⚪ 规划中 | 后续迭代功能，当前版本不实现 |
| 历史记录保存 | ❌ 不包含 | 数据仅保存在内存中，页面刷新后丢失 |
| 社交分享功能 | ❌ 不包含 | 无分享链接生成、无社交平台对接 |
| 用户账户系统 | ❌ 不包含 | 无需登录，无云端数据同步 |
| 数据导出功能 | ❌ 不包含 | 当前版本不支持数据导出 |

### 2.3 当前版本与后续迭代规划

当前MVP版本完成核心计算功能后，可根据用户反馈规划以下迭代方向：第一阶段引入历史记录本地存储功能，支持数据导出；第二阶段实现Offer对比模式；第三阶段增加社交分享和排行榜功能；第四阶段探索云端同步和多端互通的可能性。

---

## 三、输入参数规范

### 3.1 薪酬参数模块

#### 3.1.1 薪酬类型选择

用户可从以下四种招聘常用薪酬类型中选择一种进行输入：

| 薪酬类型 | 有效范围 | 单位 | 默认步长 | 说明 |
|----------|----------|------|----------|------|
| 时薪 | 0 < 金额 ≤ 5000 | 元/小时 | 1 | 直接输入时薪数值 |
| 日薪 | 0 < 金额 ≤ 50000 | 元/天 | 10 | 按日结算的薪资 |
| 月薪 | 0 < 金额 ≤ 500000 | 元/月 | 100 | 最常见的薪资表述方式 |
| 年薪 | 0 < 金额 ≤ 5000000 | 元/年 | 1000 | 高管或特殊岗位常用 |

#### 3.1.2 统一薪酬转换公式

为确保所有输入类型最终均以"时薪"作为标准输出单位，建立以下换算体系：

```
【月工作天数】= 用户自定义（支持预设选项或手动输入）
【标准工作日时长】= 8小时（可配置）

【各类型转换为时薪的公式】

时薪输入：W_hourly = 输入值

日薪输入：W_hourly = 日薪金额 ÷ 标准工作日时长
       = W_daily ÷ 8

月薪输入：W_hourly = 月薪金额 ÷ 月工作天数 ÷ 日工作时长
       = W_monthly ÷ 月工作天数 ÷ W_daily_hours

年薪输入：W_hourly = 年薪金额 ÷ 12 ÷ 月工作天数 ÷ 日工作时长
       = W_yearly ÷ 12 ÷ 月工作天数 ÷ W_daily_hours

【说明】
- 月工作天数支持用户自定义，预设选项包括：上四休三、双休、大小周、单休、无休等
- 日工作时长由用户输入的工作时间计算得出
- 所有转换均保留2位小数
```

#### 3.1.3 月工作天数自定义

用户可从预设选项中选择，也可手动输入自定义天数：

| 预设选项 | 月工作天数 | 计算方式 | 说明 |
|----------|------------|----------|------|
| 上四休三 | 17.25天 | 每周工作4天 × 4.33周/月 | 新兴弹性工作制度 |
| 双休 | 21.75天 | 每周工作5天 × 4.33周/月 | 国家标准工作制度 |
| 大小周 | 23.50天 | 大周5天 + 小周4天，平均4.7天/周 | 常见于互联网公司 |
| 单休 | 26.00天 | 每周工作6天 × 4.33周/月 | 较为辛苦的工作制度 |
| 无休 | 30.50天 | 每月工作30天（按30.5天/月计） | 全年无休的工作状态 |
| 自定义 | 用户输入 | 0 ≤ 天数 ≤ 31 | 用户可自由输入 |

**预设选项计算依据**：

```
周工作天数 → 月工作天数换算公式：
月工作天数 = 周工作天数 × 4.33（年平均周数）

具体计算：
- 上四休三：4天/周 × 4.33 = 17.32天 ≈ 17.25天（取整调整）
- 双休：5天/周 × 4.33 = 21.65天 ≈ 21.75天（国家标准）
- 大小周：(5+4)÷2 = 4.5天/周 × 4.33 = 19.49天
         或按大月21天 + 小月20天平均 ≈ 23.50天（更常见表述）
- 单休：6天/周 × 4.33 = 25.98天 ≈ 26.00天
- 无休：7天/周 × 4.33 = 30.31天 ≈ 30.50天（按自然月计）
```

**自定义输入规则**：

```
数据类型：Number
有效范围：0 ≤ 天数 ≤ 31
输入步长：1天
默认值：双休（21.75天）

验证规则：
- 天数可以为0（无工作天数）
- 天数不能超过31天
- 建议提示："请输入每月工作天数，范围0-31天"
```

#### 3.1.4 转换逻辑透明性说明

应用界面需清晰展示薪酬类型的换算过程，让用户理解计算逻辑。在计算结果页面，以"计算过程"折叠面板的形式展示：

```
计算过程示例：
├── 输入薪酬类型：月薪 15,000 元
├── 月工作天数：双休（21.75天）
├── 转换为时薪：15,000 ÷ 21.75 ÷ 8 = 86.21 元/小时
├── 后续调整因素将在此基础上进行加减运算
└── 最终结果：xxx 元/小时
```

### 3.2 生活成本参数模块

#### 3.2.1 住宿成本参数

将原有的"公司住宿提供"布尔值参数重构为"个人房租"量化参数：

| 参数名称 | 数据类型 | 有效范围 | 单位 | 默认值 | 说明 |
|----------|----------|----------|------|--------|------|
| 月均房租 | Number | 0 ≤ 金额 ≤ 50000 | 元/月 | 0 | 个人承担的实际房租支出 |

**时亏计算逻辑**：将月均房租转换为每小时的机会成本损耗（使用用户自定义的月工作天数）

```
【时亏计算公式】

时亏值（房租抵扣）= 月均房租 ÷ 月工作天数 ÷ 标准工作日时长
                  = 月均房租 ÷ 用户选择的天数 ÷ 8

【示例】
月均房租 3000 元，月工作天数选择"双休"（21.75天）：
时亏值 = 3000 ÷ 21.75 ÷ 8 = 17.24 元/小时

这意味着：每月房租相当于以时薪 17.24 元/小时 的代价"工作"来支付

【不同工作制度的时亏对比】
- 上四休三（17.25天）：3000 ÷ 17.25 ÷ 8 = 21.74 元/小时
- 双休（21.75天）：3000 ÷ 21.75 ÷ 8 = 17.24 元/小时
- 单休（26.00天）：3000 ÷ 26.00 ÷ 8 = 14.42 元/小时
- 无休（30.50天）：3000 ÷ 30.50 ÷ 8 = 12.30 元/小时
```

#### 3.2.2 餐饮成本参数

将原有的"公司餐食提供"布尔值参数重构为"日均餐费"量化参数：

| 参数名称 | 数据类型 | 有效范围 | 单位 | 默认值 | 说明 |
|----------|----------|----------|------|--------|------|
| 日均餐费 | Number | 0 ≤ 金额 ≤ 500 | 元/天 | 50 | 工作日平均餐饮支出 |

**餐费与时薪的关系说明**：

```
餐费对时薪的影响体现为"实际可支配时薪"的降低：

实际可支配时薪 = 基础时薪 - 餐费时均成本
               = 基础时薪 - (日均餐费 ÷ 日工作时长)

【示例】
日均餐费 50 元，日工作时长 8 小时：
餐费时均成本 = 50 ÷ 8 = 6.25 元/小时

实际可支配时薪 = 86.21 - 6.25 = 79.96 元/小时
```

#### 3.2.3 生活成本参数默认值设置

| 参数 | 默认值 | 设置依据 | 用户自定义说明 |
|------|--------|----------|----------------|
| 月均房租 | 0 | 考虑部分用户无需承担房租 | 用户可根据实际情况调整为0-50000元 |
| 日均餐费 | 50 | 参考一线城市普通工作餐平均水平 | 用户可根据消费习惯自由调整 |

### 3.3 工作时间参数模块

#### 3.3.1 基本工作时间参数

| 参数名称 | 数据类型 | 有效范围 | 单位/格式 | 说明 |
|----------|----------|----------|-----------|------|
| 开始工作时间 | Time | HH:mm格式 | 24小时制 | 如 09:00 |
| 结束工作时间 | Time | HH:mm格式 | 24小时制 | 必须晚于开始时间 |

#### 3.3.2 弹性时间参数边界处理

**休息时间参数**（弹性上限）：

| 参数名称 | 数据类型 | 有效范围 | 单位 | 默认值 | 说明 |
|----------|----------|----------|------|--------|------|
| 每日休息时间 | Number | 0 ≤ 时间 ≤ 工作时长 | 分钟 | 60 | 午休、茶歇等 |

```
边界规则：
- 下限：0分钟（无休息）
- 上限：用户输入的工作时长（不能超过总工作时长）
- 验证失败提示："休息时间不能超过总工作时长"
```

**摸鱼时间参数**（弹性上限）：

| 参数名称 | 数据类型 | 有效范围 | 单位 | 默认值 | 说明 |
|----------|----------|----------|------|--------|------|
| 每日摸鱼时间 | Number | 0 ≤ 时间 ≤ 工作时长 | 分钟 | 30 | 实际有效工作时间折减 |

```
边界规则：
- 下限：0分钟（无摸鱼）
- 上限：用户输入的工作时长（不能超过总工作时长）
- 验证失败提示："摸鱼时间不能超过总工作时长"
```

#### 3.3.3 特殊计算逻辑：分母为0处理

当计算公式中出现分母为0的情况时，返回特殊结果并触发对应成就：

```javascript
/**
 * 分母为0的特殊情况处理
 */

const specialCases = {
  // 情况1：工作时长为0（开始时间 = 结束时间）
  zeroWorkHours: {
    result: "∞ 元/小时",
    achievement: {
      title: "⌛ 时间静止者",
      description: "工作时长为0，你的时薪高到突破天际！",
      icon: "🕐"
    },
    condition: "日工作时长 = 0 分钟"
  },

  // 情况2：休息时间等于工作时长
  fullBreak: {
    result: "∞ 元/小时",
    achievement: {
      title: "🛋️ 全职休息家",
      description: "休息时间等于工作时长，你是在工作还是在度假？",
      icon: "🛋️"
    },
    condition: "休息时间 ≥ 工作时长"
  },

  // 情况3：摸鱼时间等于工作时长
  fullSlack: {
    result: "∞ 元/小时",
    achievement: {
      title: "🐟 摸鱼仙人",
      description: "摸鱼时间等于工作时长，你的时薪已经不受时间约束！",
      icon: "🐟"
    },
    condition: "摸鱼时间 ≥ 工作时长"
  }
};
```

### 3.4 通勤时间参数模块

| 参数名称 | 数据类型 | 有效范围 | 单位 | 默认值 | 说明 |
|----------|----------|----------|------|--------|------|
| 每日通勤时间 | Number | 0 ≤ 时间 ≤ 无上限 | 分钟 | 60 | 上下班往返总时长 |

```
设计说明：
- 不设置常规数值上限，允许用户自由输入超长通勤时间
- 建议界面展示："你每天花 N 分钟在通勤路上"
- 通勤时间对时薪的影响在"时间密度"模型中体现
```

### 3.5 KPI参数模块

#### 3.5.1 KPI评级重构

将原有的正向调节因子重构为负面调节因子，建立KPI与时间密度的关联模型：

| KPI等级 | 时间密度系数 | 压力等级 | 说明 |
|---------|-------------|----------|------|
| S | 1.05 | 极高压力 | 极高要求，几乎不可能达成 |
| A | 1.10 | 高压力 | 高要求，需要非常努力 |
| B | 1.15 | 中高压力 | 高于平均的KPI要求 |
| C | 1.20 | 高压力 | 严格考核，压力较大 |
| D | 1.30 | 极高压力 | 极其严格的考核标准 |

#### 3.5.2 KPI与时间密度的关联模型

```
【时间密度概念】
时间密度 = 实际投入时间 / 合同约定时间

KPI等级越高，意味着：
1. 同样的工作需要投入更多时间完成 → 时间密度升高
2. 隐性工作时间增加（加班、无偿付出）→ 时薪被稀释
3. 心理压力和时间成本增加 → 时薪实际价值下降

【计算公式】
有效工作时间 = 计划工作时长 × 时间密度系数

【示例】
- 合同约定8小时工作，KPI等级D（1.30）
- 有效工作时间 = 8 × 1.30 = 10.4 小时
- 实际时薪被稀释为基础时薪的 8/10.4 = 76.9%
```

#### 3.5.3 KPI等级与影响系数对照表

| KPI等级 | 时间密度系数 | 时薪稀释比例 | 负面影响描述 |
|---------|-------------|-------------|-------------|
| S | 1.05 | 95.2% | 轻微稀释，精英级表现 |
| A | 1.10 | 90.9% | 明显稀释，高绩效要求 |
| B | 1.15 | 87.0% | 显著稀释，中高压力 |
| C | 1.20 | 83.3% | 较大稀释，严格考核 |
| D | 1.30 | 76.9% | 严重稀释，极高压力 |

### 3.6 工作氛围参数模块（软性条件倍率调节）

#### 3.6.1 参数清单

| 参数名称 | 数据类型 | 有效范围 | 单位 | 默认值 | 计算类型 |
|----------|----------|----------|------|--------|----------|
| 工作氛围评分 | Number | 1 ≤ 评分 ≤ 5 | 星级 | 3 | 软性倍率 |
| 同事关系评分 | Number | 1 ≤ 评分 ≤ 5 | 星级 | 3 | 软性倍率 |
| 工位环境评分 | Number | 1 ≤ 评分 ≤ 5 | 星级 | 3 | 软性倍率 |

#### 3.6.2 软性条件倍率调节机制

```javascript
/**
 * 软性条件倍率调节系数表
 */

const softFactorTable = {
  // 工作氛围评分
  atmosphere: {
    1: { factor: 0.85, label: "非常压抑" },
    2: { factor: 0.92, label: "有些压抑" },
    3: { factor: 1.00, label: "一般般" },
    4: { factor: 1.08, label: "比较舒适" },
    5: { factor: 1.15, label: "非常舒适" }
  },

  // 同事关系评分
  colleague: {
    1: { factor: 0.85, label: "非常紧张" },
    2: { factor: 0.92, label: "有些紧张" },
    3: { factor: 1.00, label: "正常" },
    4: { factor: 1.08, label: "比较融洽" },
    5: { factor: 1.15, label: "非常融洽" }
  },

  // 工位环境评分
  workspace: {
    1: { factor: 0.85, label: "非常差" },
    2: { factor: 0.92, label: "比较差" },
    3: { factor: 1.00, label: "一般" },
    4: { factor: 1.08, label: "比较好" },
    5: { factor: 1.15, label: "非常好" }
  }
};
```

### 3.7 完整参数清单汇总

| 序号 | 参数名称 | 数据类型 | 有效范围 | 单位 | 默认值 | 计算类型 |
|------|----------|----------|----------|------|--------|----------|
| 1 | 薪酬类型 | Enum | 时薪/日薪/月薪/年薪 | — | 月薪 | 转换输入 |
| 2 | 薪酬金额 | Number | 根据类型定 | 元 | 0 | 转换输入 |
| 3 | 月工作天数类型 | Enum | 上四休三/双休/大小周/单休/无休/自定义 | — | 双休 | 转换基准 |
| 4 | 自定义工作天数 | Number | 0 < 天数 ≤ 31 | 天 | 21.75 | 转换基准 |
| 5 | 开始工作时间 | Time | HH:mm | 24小时制 | 09:00 | 时间参数 |
| 6 | 结束工作时间 | Time | HH:mm | 24小时制 | 18:00 | 时间参数 |
| 7 | 每日休息时间 | Number | 0 ~ 工作时长 | 分钟 | 60 | 时间参数 |
| 8 | 每日摸鱼时间 | Number | 0 ~ 工作时长 | 分钟 | 30 | 时间参数 |
| 9 | 每日通勤时间 | Number | 0 ~ 无上限 | 分钟 | 60 | 通勤参数 |
| 10 | 月均房租 | Number | 0 ~ 50000 | 元/月 | 0 | 硬性指标 |
| 11 | 日均餐费 | Number | 0 ~ 500 | 元/天 | 50 | 硬性指标 |
| 12 | KPI等级 | Enum | S/A/B/C/D | — | B | 负面调节 |
| 13 | 工作氛围评分 | Number | 1 ~ 5 | 星级 | 3 | 软性倍率 |
| 14 | 同事关系评分 | Number | 1 ~ 5 | 星级 | 3 | 软性倍率 |
| 15 | 工位环境评分 | Number | 1 ~ 5 | 星级 | 3 | 软性倍率 |

---

## 四、计算公式与权重系统

### 4.1 计算规则体系设计

#### 4.1.1 指标类型分类

| 类型 | 参数 | 计算方式 | 说明 |
|------|------|----------|------|
| 硬性指标 | 房租、餐食 | 数值加减 | 直接影响最终时薪的绝对数值 |
| 软性条件 | 工作氛围、同事关系、工位环境 | 倍率调节 | 以乘数形式影响最终时薪 |
| 负面调节 | KPI等级 | 时间密度系数 | 通过稀释有效工作时间影响时薪 |
| 时间参数 | 休息时间、摸鱼时间 | 工作时长折减 | 调整有效工作时间的基数 |

#### 4.1.2 计算优先级顺序

```
计算顺序说明：
┌─────────────────────────────────────────────────────────────────┐
│  第1步：薪酬类型转换                                              │
│       将任意薪酬类型统一转换为时薪基准值                          │
├─────────────────────────────────────────────────────────────────┤
│  第2步：计算基础工作时长                                          │
│       基础工作时长 = 结束时间 - 开始时间                          │
├─────────────────────────────────────────────────────────────────┤
│  第3步：应用时间参数调整                                          │
│       有效工作时长 = 基础工作时长 - 休息时间 - 摸鱼时间           │
├─────────────────────────────────────────────────────────────────┤
│  第4步：应用KPI时间密度系数                                       │
│       调整后工作时长 = 有效工作时长 × KPI时间密度系数             │
├─────────────────────────────────────────────────────────────────┤
│  第5步：应用硬性指标（数值加减）                                  │
│       调整后时薪 = 基准时薪 - 房租时亏 - 餐费时均成本             │
├─────────────────────────────────────────────────────────────────┤
│  第6步：应用软性条件倍率                                          │
│       最终时薪 = 调整后时薪 × 氛围系数 × 同事系数 × 工位系数      │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 完整计算公式

#### 4.2.1 薪酬转换公式

```
【统一转换为月薪基准】
月薪基准 = 
  时薪输入 × 8 × 月工作天数
  日薪输入 × 月工作天数
  月薪输入 × 1
  年薪输入 ÷ 12

【转换为时薪基准】
时薪基准 = 月薪基准 ÷ 月工作天数 ÷ 有效工作时长
        = 薪酬金额转换值 ÷ 月工作天数 ÷ 有效工作时长
```

**月工作天数应用示例**：

```
假设月薪15,000元，有效工作时长8小时：

- 选择"上四休三"（17.25天/月）：时薪 = 15000 ÷ 17.25 ÷ 8 = 108.70 元/小时
- 选择"双休"（21.75天/月）：时薪 = 15000 ÷ 21.75 ÷ 8 = 86.21 元/小时
- 选择"大小周"（23.50天/月）：时薪 = 15000 ÷ 23.50 ÷ 8 = 79.79 元/小时
- 选择"单休"（26.00天/月）：时薪 = 15000 ÷ 26.00 ÷ 8 = 72.12 元/小时
- 选择"无休"（30.50天/月）：时薪 = 15000 ÷ 30.50 ÷ 8 = 61.48 元/小时

结论：同样的月薪，工作天数越多，时薪反而越低！
```

#### 4.2.2 硬性指标计算

```
【房租时亏】（使用用户自定义的月工作天数）
房租时亏 = 月均房租 ÷ 月工作天数 ÷ 8

【餐费时均成本】
餐费时均成本 = 日均餐费 ÷ 日工作时长

【硬性指标总计扣除】
硬性扣除 = 房租时亏 + 餐费时均成本
```

**不同工作制度对时亏的影响**：

| 工作制度 | 月工作天数 | 房租3000元的时亏 |
|----------|------------|------------------|
| 上四休三 | 17.25天 | 21.74 元/小时 |
| 双休 | 21.75天 | 17.24 元/小时 |
| 大小周 | 23.50天 | 15.96 元/小时 |
| 单休 | 26.00天 | 14.42 元/小时 |
| 无休 | 30.50天 | 12.30 元/小时 |

```
分析：工作天数越多，每天分摊的房租成本越低，时亏反而越小
```

#### 4.2.3 时间参数计算

```
【基础工作时长】
基础工作时长 = 结束时间 - 开始时间 （单位：小时）

【有效工作时长】
有效工作时长 = 基础工作时长 - 休息时间/60 - 摸鱼时间/60

【KPI时间密度调整】
调整后工作时长 = 有效工作时长 × KPI时间密度系数
```

#### 4.2.4 软性条件倍率计算

```
【软性倍率总系数】
软性倍率 = 氛围系数 × 同事系数 × 工位系数
```

#### 4.2.5 最终计算公式

```
最终时薪 = 
  (时薪基准 - 硬性扣除) × 软性倍率

其中：
- 时薪基准 = 薪酬金额转换后的时薪值
- 硬性扣除 = 房租时亏 + 餐费时均成本
- 软性倍率 = 氛围系数 × 同事系数 × 工位系数

完整展开：
最终时薪 = 
  (转换时薪 - 月均房租÷21.75÷8 - 日均餐费÷日工作时长) 
  × 氛围系数 × 同事系数 × 工位系数
```

### 4.3 计算示例

```javascript
/**
 * 完整计算示例
 */

// 输入参数
const input = {
  salaryType: "monthly",       // 薪酬类型：月薪
  salaryAmount: 15000,         // 薪酬金额：15000元
  workDaysType: "doubleRest",  // 工作制度：双休
  customWorkDays: 21.75,       // 自定义工作天数（当workDaysType为custom时使用）
  startTime: "09:00",
  endTime: "18:00",
  breakTime: 60,               // 休息60分钟
  slackOffTime: 45,            // 摸鱼45分钟
  commuteTime: 90,             // 通勤90分钟
  monthlyRent: 3000,           // 月均房租3000元
  dailyMealCost: 50,           // 日均餐费50元
  kpiLevel: "B",               // KPI等级B
  atmosphereRating: 4,         // 工作氛围4星
  colleagueRating: 3,          // 同事关系3星
  workspaceRating: 4           // 工位环境4星
};

// ========== 计算过程 ==========

// 第1步：薪酬转换（使用自定义月工作天数）
const 月工作天数 = 21.75; // 根据workDaysType获取
const 时薪基准 = 15000 / 21.75 / 8; // 86.21 元/小时

// 第2步：工作时长计算
const 基础工作时长 = 9; // 18:00 - 09:00 = 9小时
const 有效工作时长 = 9 - 1 - 0.75; // 7.25小时

// 第3步：硬性指标扣除（使用自定义月工作天数计算时亏）
const 房租时亏 = 3000 / 21.75 / 8; // 17.24 元/小时
const 餐费时均成本 = 50 / 8; // 6.25 元/小时
const 硬性扣除小计 = 17.24 + 6.25; // 23.49 元/小时

// 第4步：KPI时间密度调整
const kpi时间密度系数 = 1.15; // B级
const 调整后工作时长 = 7.25 * 1.15; // 8.34小时
const 时薪基准调整 = 86.21 * (7.25 / 8.34); // 75.02 元/小时

// 第5步：应用硬性扣除
const 调整后时薪 = 75.02 - 23.49; // 51.53 元/小时

// 第6步：软性条件倍率
const 氛围系数 = 1.08; // 4星
const 同事系数 = 1.00; // 3星
const 工位系数 = 1.08; // 4星
const 软性倍率 = 1.08 * 1.00 * 1.08; // 1.17

// 最终结果
const 最终时薪 = 51.53 * 1.17; // 60.29 元/小时

console.log("最终时薪：", 最终时薪, "元/小时");
console.log("月工作天数：", 月工作天数, "天");
```

---

## 五、用户界面设计

### 5.1 设计原则

应用采用渐进式披露设计模式，让用户既能快速完成简单计算，也能深入调整每个细节。界面风格保持现代简洁，色彩运用温馨友善，以橙色系为主色调传达"价值"和"收获"的正向感受。

### 5.2 界面流程

#### 5.2.1 启动与引导

用户首次打开应用时，展示简洁欢迎页面，包含品牌标识、slogan（如"你实际赚了多少？"）以及"开始计算"入口。无需登录，无需注册，直接进入计算界面。

#### 5.2.2 主计算界面

采用单页表单设计，按逻辑分组展示输入参数：

1. **薪酬信息**：薪酬类型下拉选择 + 金额输入框
2. **工作时间**：开始/结束时间选择器
3. **弹性时间**：休息时间滑块 + 摸鱼时间滑块
4. **生活成本**：月均房租输入 + 日均餐费输入
5. **通勤时间**：通勤时间滑块
6. **KPI评级**：等级下拉选择（S/A/B/C/D）
7. **氛围评分**：三组星级评分器（氛围/同事/工位）

#### 5.2.3 交互细节

时间选择采用24小时制数字转盘，分钟以15分钟为步长提供快速选择。星级评分使用5颗可点击的星星，支持半星选择，选中时伴有缩放动画。滑块拖动时上方实时显示数值变化。输入框失去焦点时即时校验，错误信息显示在输入框下方。

### 5.3 视觉呈现优化

#### 5.3.1 时薪水平与界面风格的映射规则

根据最终计算结果，动态调整界面的视觉风格，为用户提供即时的情绪反馈：

| 时薪区间 | 风格主题 | 主色调 | 背景渐变 | 成就标签 |
|----------|----------|--------|----------|----------|
| < 0元 | 💸 付费上班级 | #FF0000 | 血红渐变 | "付费上班" |
| 0-20元 | 🌑 黑暗级 | #FF453A | 深红渐变 | "时薪难民" |
| 20-40元 | 🔴 困难级 | #FF6B6B | 橙红渐变 | "温饱线挣扎" |
| 40-60元 | 🟡 普通级 | #FFD60A | 金黄渐变 | "普通打工人" |
| 60-80元 | 🟢 良好级 | #34C759 | 绿色渐变 | "中产预备役" |
| 80-120元 | 🔵 优秀级 | #007AFF | 蓝色渐变 | "时薪精英" |
| 120-200元 | 🟣 卓越级 | #AF52DE | 紫色渐变 | "时薪贵族" |
| > 200元 | 🟠 传说级 | #FF9500 | 金橙渐变 | "时薪之神" |

**负时薪说明**：当房租时亏 + 餐费时均成本 > 基础时薪时，计算结果为负数，表示"付费上班"状态。例如：高房租+低时薪的工作，实际上是在花钱上班。

#### 5.3.2 动态色号切换系统

```javascript
/**
 * 基于时薪区间的动态色号系统
 */

const themeConfig = {
  negative: {
    threshold: 0,
    primaryColor: "#FF0000",
    gradientStart: "#8B0000",
    gradientEnd: "#FF0000",
    achievementTitle: "付费上班",
    achievementEmoji: "💸",
    textColor: "#FFFFFF"
  },
  dark: {
    threshold: 20,
    primaryColor: "#FF453A",
    gradientStart: "#8B0000",
    gradientEnd: "#FF453A",
    achievementTitle: "时薪难民",
    achievementEmoji: "🌑",
    textColor: "#FFFFFF"
  },
  difficult: {
    threshold: 40,
    primaryColor: "#FF6B6B",
    gradientStart: "#FF4500",
    gradientEnd: "#FF6B6B",
    achievementTitle: "温饱线挣扎",
    achievementEmoji: "🔴",
    textColor: "#FFFFFF"
  },
  normal: {
    threshold: 60,
    primaryColor: "#FFD60A",
    gradientStart: "#FF8C00",
    gradientEnd: "#FFD60A",
    achievementTitle: "普通打工人",
    achievementEmoji: "🟡",
    textColor: "#000000"
  },
  good: {
    threshold: 80,
    primaryColor: "#34C759",
    gradientStart: "#228B22",
    gradientEnd: "#34C759",
    achievementTitle: "中产预备役",
    achievementEmoji: "🟢",
    textColor: "#FFFFFF"
  },
  excellent: {
    threshold: 120,
    primaryColor: "#007AFF",
    gradientStart: "#4169E1",
    gradientEnd: "#007AFF",
    achievementTitle: "时薪精英",
    achievementEmoji: "🔵",
    textColor: "#FFFFFF"
  },
  outstanding: {
    threshold: 200,
    primaryColor: "#AF52DE",
    gradientStart: "#4B0082",
    gradientEnd: "#AF52DE",
    achievementTitle: "时薪贵族",
    achievementEmoji: "🟣",
    textColor: "#FFFFFF"
  },
  legendary: {
    threshold: Infinity,
    primaryColor: "#FF9500",
    gradientStart: "#FF4500",
    gradientEnd: "#FFD700",
    achievementTitle: "时薪之神",
    achievementEmoji: "🟠",
    textColor: "#FFFFFF"
  }
};
```

#### 5.3.3 成就卡片视觉样式

成就卡片根据时薪区间自动匹配视觉风格，保持一致的视觉体验：

```css
/* 成就卡片基础样式 */
.achievement-card {
  padding: 24px;
  border-radius: 20px;
  text-align: center;
  color: var(--text-color);
}

.achievement-card.greater-than-200 {
  background: linear-gradient(135deg, #FF4500 0%, #FFD700 100%);
  box-shadow: 0 8px 32px rgba(255, 149, 0, 0.4);
}

.achievement-card .hourly-wage {
  font-size: 64px;
  font-weight: 800;
  margin: 16px 0;
}

.achievement-card .achievement-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 24px;
  border-radius: 50px;
  font-size: 18px;
  font-weight: 600;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
}
```

---

## 六、输出展示设计

### 6.1 核心结果展示

页面顶部展示与时薪区间匹配的成就卡片，包含超大号字体显示的计算结果、单位"元/小时"、以及根据计算结果生成的成就标签和emoji。卡片背景采用与时薪区间匹配的渐变色，阴影效果增强立体感。

### 6.2 计算过程分解

折叠面板展示详细的计算过程：

```
计算过程：
├── 薪酬转换
│   ├── 输入：月薪 15,000 元
│   ├── 月工作天数：双休（21.75天）
│   └── 转换为时薪基准：86.21 元/小时
├── 工作时长调整
│   ├── 基础工作时长：9 小时
│   ├── 休息时间扣除：-1 小时
│   ├── 摸鱼时间扣除：-0.75 小时
│   └── 有效工作时长：7.25 小时
├── KPI时间密度调整
│   ├── KPI等级：B (1.15×)
│   └── 调整后时薪：75.02 元/小时
├── 硬性指标扣除
│   ├── 房租时亏：-17.24 元/小时（月工作天数21.75天）
│   ├── 餐费时均成本：-6.25 元/小时
│   └── 小计：-23.49 元/小时
├── 软性条件倍率
│   ├── 工作氛围：4星 (1.08×)
│   ├── 同事关系：3星 (1.00×)
│   ├── 工位环境：4星 (1.08×)
│   └── 软性倍率：1.17×
└── 最终结果：60.29 元/小时
```

### 6.3 特殊成就展示

当触发"分母为0"等特殊计算结果时，显示对应的整活成就：

```
┌─────────────────────────────────────────────────┐
│                   ⌛ 时间静止者                   │
├─────────────────────────────────────────────────┤
│                                                 │
│              ∞ 元/小时                           │
│                                                 │
│              工作时长为0                         │
│            你的时薪高到突破天际！                 │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

## 七、附加功能规划

### 7.1 成就系统

应用内置整活成就系统，当用户计算出特殊结果时触发：

| 成就名称 | 触发条件 | 描述 |
|----------|----------|------|
| ⌛ 时间静止者 | 工作时长 = 0 | 工作时长为0，你的时薪突破天际！ |
| 🛋️ 全职休息家 | 休息时间 ≥ 工作时长 | 休息时间等于工作时长，你是在工作还是在度假？ |
| 🐟 摸鱼仙人 | 摸鱼时间 ≥ 工作时长 | 摸鱼时间等于工作时长，你的时薪不受时间约束！ |
| 🚗 通勤马拉松 | 通勤时间 > 120分钟 | 每天通勤超过2小时，你的时间都花在了路上！ |
| 🏠 房奴日记 | 月均房租 > 5000 | 房租这么高，你的时薪都被房东赚走了！ |
| 💼 KPI地狱 | KPI等级 = D | D级KPI，你的时薪正在被考核稀释！ |

### 7.2 时薪换算趣味展示

将时薪换算为生活化参照，增加趣味性：

```
你的时薪可以购买：
├── 奶茶：60.29 ÷ 15 ≈ 4 杯
├── 麦当劳巨无霸：60.29 ÷ 30 ≈ 2 个
├── 电影票：60.29 ÷ 60 ≈ 1 张
└── 月租3000的房子：需要工作 50 小时
```

### 7.3 功能排除说明

当前MVP版本明确排除以下功能：

| 功能 | 排除原因 |
|------|----------|
| 历史记录保存 | MVP阶段聚焦核心计算，数据仅存内存 |
| 社交分享 | 不考虑社交功能，专注单机体验 |
| 用户账户 | 无需登录，保护用户隐私 |
| 数据导出 | 当前版本不支持 |
| Offer对比 | 标记为规划中，后续迭代实现 |

---

## 八、技术架构设计

### 8.1 技术选型限制

| 层级 | 技术选型 | 说明 |
|------|----------|------|
| 页面结构 | HTML5 | 原生HTML，不使用框架 |
| 样式设计 | CSS3 | 原生CSS，可使用预处理器 |
| 交互逻辑 | JavaScript (ES6+) | 原生JavaScript，不使用框架 |
| 数据存储 | 内存 | 所有数据仅保存在内存中 |
| 运行环境 | 单平台浏览器 | 专注Chrome/Edge/Safari等现代浏览器 |

### 8.2 原生开发规范

```html
<!-- 项目结构 -->
project/
├── index.html          # 主页面
├── css/
│   ├── style.css       # 主样式文件
│   └── theme.css       # 动态主题样式
└── js/
    ├── main.js         # 主逻辑入口
    ├── calculator.js   # 计算模块
    ├── validator.js    # 验证模块
    └── renderer.js     # 渲染模块
```

### 8.3 数据存储策略

```
【内存存储设计】

const appState = {
  // 用户输入
  input: {
    salaryType: "monthly",
    salaryAmount: 15000,
    startTime: "09:00",
    endTime: "18:00",
    breakTime: 60,
    slackOffTime: 45,
    commuteTime: 90,
    monthlyRent: 3000,
    dailyMealCost: 50,
    kpiLevel: "B",
    atmosphereRating: 4,
    colleagueRating: 3,
    workspaceRating: 4
  },
  
  // 计算结果
  result: {
    baseHourlyWage: 86.21,
    adjustedHourlyWage: 60.29,
    theme: "normal",
    achievement: null
  },
  
  // 计算历史（仅内存，页面刷新后丢失）
  history: []
};

// 页面刷新后 appState 被重置
// 如需保存历史记录，后续版本可引入 localStorage
```

### 8.4 模块设计

```javascript
/**
 * 模块职责划分
 */

// calculator.js - 计算核心模块
export function calculateHourlyWage(input) {
  // 薪酬类型转换
  const hourlyBase = convertSalaryToHourly(input);
  
  // 工作时长计算
  const effectiveHours = calculateEffectiveHours(input);
  
  // KPI时间密度调整
  const adjustedHours = applyKPITimeDensity(input, effectiveHours);
  
  // 硬性指标扣除
  const afterDeductions = applyHardFactors(hourlyBase, adjustedHours, input);
  
  // 软性条件倍率
  const finalWage = applySoftFactors(afterDeductions, input);
  
  return formatResult(finalWage);
}

// validator.js - 验证模块
export function validateInput(name, value, allInputs) {
  // 参数验证逻辑
  // 返回 { valid: boolean, error?: string }
}

// renderer.js - 渲染模块
export function renderResult(result, container) {
  // 根据时薪区间应用主题
  const theme = getThemeForWage(result.finalWage);
  
  // 渲染成就卡片
  renderAchievementCard(result, container, theme);
  
  // 渲染计算过程
  renderCalculationProcess(result, container);
}

// theme.js - 主题模块
export function getThemeForWage(wage) {
  // 根据时薪区间返回对应主题配置
  return themeConfig[getWageLevel(wage)];
}
```

---

## 九、平台兼容性设计

### 9.1 运行环境要求

| 浏览器 | 最低版本 | 说明 |
|--------|----------|------|
| Chrome | 80+ | 推荐使用 |
| Edge | 80+ | 推荐使用 |
| Safari | 14+ | macOS/iOS |
| Firefox | 75+ | 支持 |
| QQ浏览器 | 12+ | 国内用户 |
| 微信内置浏览器 | 最新版 | 移动端 |

### 9.2 响应式布局

| 屏幕宽度 | 布局策略 |
|----------|----------|
| < 480px | 单列布局，移动端优化 |
| 480px ~ 768px | 单列布局，平板适配 |
| > 768px | 双列布局，桌面端 |

### 9.3 无障碍支持

满足WCAG 2.1 AA级基础标准：图片提供替代文本，色彩对比度≥4.5:1，支持键盘导航，焦点状态清晰可见。

---

## 十、性能要求

### 10.1 性能指标

| 指标 | 要求 |
|------|------|
| 页面加载时间 | ≤ 2秒 |
| 计算响应时间 | ≤ 100毫秒 |
| 渲染更新时间 | ≤ 200毫秒 |

### 10.2 资源占用

| 状态 | 内存占用 |
|------|----------|
| 空闲状态 | ≤ 10MB |
| 计算状态 | ≤ 20MB |

---

## 十一、附录

### 11.1 术语表

| 术语 | 定义 |
|------|------|
| 时薪基准 | 薪酬类型转换后的初始时薪值 |
| 硬性扣除 | 房租、餐食等固定支出的时薪抵扣 |
| 时间密度 | KPI等级影响的实际工作时间膨胀系数 |
| 软性倍率 | 工作氛围等主观因素的调节乘数 |
| 时亏 | 房租等支出转换为时薪后的损耗值 |
| 月工作天数 | 用户自定义的每月工作日数，用于时薪计算基准 |

### 11.2 月工作天数预设选项

| 预设选项 | 月工作天数 | 计算公式 | 适用场景 |
|----------|------------|----------|----------|
| 上四休三 | 17.25天 | 4天/周 × 4.33周/月 | 新兴弹性工作制度 |
| 双休 | 21.75天 | 5天/周 × 4.33周/月 | 国家标准工作制度 |
| 大小周 | 23.50天 | (5+4)÷2天/周 × 4.33周/月 | 常见于互联网公司 |
| 单休 | 26.00天 | 6天/周 × 4.33周/月 | 较为辛苦的工作制度 |
| 无休 | 30.50天 | 7天/周 × 4.33周/月 ≈ 30.5天 | 全年无休的工作状态 |
| 自定义 | 0.5 ~ 31天 | 用户手动输入 | 特殊情况或自由职业 |

### 11.3 KPI与时间密度对照表

| KPI等级 | 时间密度系数 | 时薪稀释比例 |
|---------|-------------|-------------|
| S | 1.05 | 95.2% |
| A | 1.10 | 90.9% |
| B | 1.15 | 87.0% |
| C | 1.20 | 83.3% |
| D | 1.30 | 76.9% |

### 11.4 软性条件倍率表

| 评分 | 氛围系数 | 同事系数 | 工位系数 |
|------|---------|---------|---------|
| 1星 | 0.85 | 0.85 | 0.85 |
| 2星 | 0.92 | 0.92 | 0.92 |
| 3星 | 1.00 | 1.00 | 1.00 |
| 4星 | 1.08 | 1.08 | 1.08 |
| 5星 | 1.15 | 1.15 | 1.15 |

### 11.5 时薪区间主题配置表

| 区间 | 主色调 | 成就标签 |
|------|--------|----------|
| < 0元 | #FF0000 | 付费上班 |
| 0-20元 | #FF453A | 时薪难民 |
| 20-40元 | #FF6B6B | 温饱线挣扎 |
| 40-60元 | #FFD60A | 普通打工人 |
| 60-80元 | #34C759 | 中产预备役 |
| 80-120元 | #007AFF | 时薪精英 |
| 120-200元 | #AF52DE | 时薪贵族 |
| > 200元 | #FF9500 | 时薪之神 |

### 11.6 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| 1.0.0 | 2025-12-27 | 初始需求文档发布 |
| 2.0.0 | 2025-12-27 | 重构参数体系，优化计算逻辑，限定MVP版本 |

---

*文档编制日期：2025年12月27日*
*文档版本：2.0.0*
