# 时薪计算器测试用例集

## 文档概述

本文档为时薪计算器应用提供完整的测试用例集，涵盖单元测试、集成测试和功能测试三个维度。测试用例设计遵循全面性原则，确保覆盖所有边界条件、分支场景和异常情况。文档结构按模块组织，便于测试人员快速查阅和执行测试。

---

## 一、测试环境与执行指南

### 1.1 测试环境要求

| 环境项 | 要求 | 说明 |
|--------|------|------|
| 浏览器 | Chrome 80+ / Edge 80+ / Safari 14+ / Firefox 75+ | 现代浏览器均可 |
| 操作系统 | Windows / macOS / Linux | 跨平台兼容 |
| Node.js | 14.0+ | 如需运行自动化测试 |
| 测试框架 | Jest / Vitest | 推荐用于单元测试 |

### 1.2 测试用例执行优先级

| 优先级 | 说明 | 适用范围 |
|--------|------|----------|
| P0 | 核心功能，必须通过 | 主计算流程、表单验证 |
| P1 | 重要功能，建议覆盖 | 边界条件、异常处理 |
| P2 | 一般功能，选择性覆盖 | 辅助功能、UI渲染 |

### 1.3 测试数据约定

本文档中使用的测试数据遵循以下约定：
- 货币单位：人民币元（¥）
- 时间单位：分钟（min）或小时（h）
- 数值精度：计算结果保留2位小数

---

## 二、calculator.js 模块测试用例

### 2.1 薪酬类型转换函数测试

#### TC-CAL-001：时薪类型直接返回

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证时薪类型输入直接返回原值 |
| **前置条件** | 无 |
| **输入数据** | `salaryType: 'hourly'`, `salaryAmount: 100` |
| **预期输出** | `hourlyBase: 100`, `workDays: 21.75` |
| **后置条件** | 返回对象包含 `hourlyBase` 和 `workDays` 属性 |
| **优先级** | P0 |

**测试步骤**：
1. 调用 `convertSalaryToHourly()` 函数
2. 传入时薪类型和金额100元
3. 验证返回的 `hourlyBase` 值是否为100

**断言逻辑**：
```javascript
expect(result.hourlyBase).toBe(100);
expect(result.workDays).toBe(21.75);
```

#### TC-CAL-002：日薪类型转换为时薪

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证日薪类型按8小时标准转换为时薪 |
| **前置条件** | 无 |
| **输入数据** | `salaryType: 'daily'`, `salaryAmount: 800` |
| **预期输出** | `hourlyBase: 100`, `workDays: 21.75` |
| **后置条件** | 返回对象格式正确 |
| **优先级** | P0 |

**测试步骤**：
1. 调用 `convertSalaryToHourly()` 函数
2. 传入日薪类型和金额800元
3. 验证返回的 `hourlyBase` 值是否为100

**断言逻辑**：
```javascript
// 日薪800元 ÷ 8小时 = 时薪100元
expect(result.hourlyBase).toBe(100);
```

#### TC-CAL-003：月薪类型转换为时薪（双休）

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证月薪类型按月工作天数转换为时薪 |
| **前置条件** | 工作制度选择双休 |
| **输入数据** | `salaryType: 'monthly'`, `salaryAmount: 15000`, `workDaysType: 'doubleRest'` |
| **预期输出** | `hourlyBase: 86.21`, `workDays: 21.75` |
| **后置条件** | 返回对象包含正确的 `workDaysLabel` |
| **优先级** | P0 |

**测试步骤**：
1. 调用 `convertSalaryToHourly()` 函数
2. 传入月薪类型、金额15000元、工作制度双休
3. 验证返回的时薪基准值

**断言逻辑**：
```javascript
// 月薪15000 ÷ 21.75天 ÷ 8小时 = 86.21元/小时
expect(result.hourlyBase).toBeCloseTo(86.21, 2);
```

#### TC-CAL-004：年薪类型转换为时薪

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证年薪类型按12个月转换为月薪再转时薪 |
| **前置条件** | 无 |
| **输入数据** | `salaryType: 'yearly'`, `salaryAmount: 240000` |
| **预期输出** | `hourlyBase: 115.09`, `workDays: 21.75` |
| **后置条件** | 返回对象格式正确 |
| **优先级** | P0 |

**测试步骤**：
1. 调用 `convertSalaryToHourly()` 函数
2. 传入年薪类型和金额240000元
3. 验证返回的时薪基准值

**断言逻辑**：
```javascript
// 年薪240000 ÷ 12月 = 月薪20000
// 月薪20000 ÷ 21.75天 ÷ 8小时 = 115.09元/小时
expect(result.hourlyBase).toBeCloseTo(115.09, 2);
```

#### TC-CAL-005：自定义工作天数处理

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证自定义工作天数正确应用于计算 |
| **前置条件** | 工作制度选择自定义 |
| **输入数据** | `salaryType: 'monthly'`, `salaryAmount: 15000`, `workDaysType: 'custom'`, `customWorkDays: 20` |
| **预期输出** | `hourlyBase: 93.75`, `workDays: 20` |
| **后置条件** | 自定义天数正确替换预设天数 |
| **优先级** | P1 |

**测试步骤**：
1. 调用 `convertSalaryToHourly()` 函数
2. 传入自定义工作天数20天
3. 验证返回的时薪基准值

**断言逻辑**：
```javascript
// 月薪15000 ÷ 20天 ÷ 8小时 = 93.75元/小时
expect(result.hourlyBase).toBeCloseTo(93.75, 2);
expect(result.workDays).toBe(20);
```

#### TC-CAL-006：各工作制度时薪对比

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证不同工作制度对时薪计算的差异影响 |
| **前置条件** | 月薪15000元固定 |
| **输入数据** | 6种工作制度类型 |
| **预期输出** | 不同的时薪基准值 |
| **后置条件** | 返回对应的 `workDaysLabel` |
| **优先级** | P1 |

**测试步骤**：
1. 分别使用6种工作制度计算时薪
2. 记录各制度的时薪基准值

**预期结果对照表**：

| 工作制度 | 月工作天数 | 预期时薪基准 |
|----------|------------|-------------|
| 上四休三 | 17.25 | 108.70 |
| 双休 | 21.75 | 86.21 |
| 大小周 | 23.50 | 79.79 |
| 单休 | 26.00 | 72.12 |
| 无休 | 30.50 | 61.48 |
| 自定义(15天) | 15 | 125.00 |

**断言逻辑**：
```javascript
expect(result.workDaysLabel).toBe('上四休三');
expect(result.workDaysLabel).toBe('双休');
// 以此类推...
```

#### TC-CAL-007：边界值——薪酬金额为0

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证薪酬金额为0时的处理 |
| **前置条件** | 无 |
| **输入数据** | `salaryType: 'monthly'`, `salaryAmount: 0` |
| **预期输出** | `hourlyBase: 0` |
| **后置条件** | 不抛出异常 |
| **优先级** | P1 |

**测试步骤**：
1. 调用 `convertSalaryToHourly()` 函数
2. 传入金额0
3. 验证返回值为0

**断言逻辑**：
```javascript
expect(result.hourlyBase).toBe(0);
```

#### TC-CAL-008：边界值——薪酬金额达上限

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各薪酬类型最大金额的处理 |
| **前置条件** | 无 |
| **输入数据** | 各类型最大金额：`hourly: 5000`, `daily: 50000`, `monthly: 500000`, `yearly: 5000000` |
| **预期输出** | 正确计算，不溢出 |
| **后置条件** | 数值精度正确 |
| **优先级** | P1 |

**测试步骤**：
1. 依次传入各类型最大金额
2. 验证计算结果正确

**断言逻辑**：
```javascript
// 时薪5000直接返回
expect(hourlyResult.hourlyBase).toBe(5000);
// 年薪500万计算
expect(yearlyResult.hourlyBase).toBeCloseTo(2398.85, 2);
```

### 2.2 工作时长计算函数测试

#### TC-CAL-009：标准工作时间计算（9小时）

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证标准朝九晚六工作时长计算 |
| **前置条件** | 开始09:00，结束18:00 |
| **输入数据** | `startTime: '09:00'`, `endTime: '18:00'`, `breakTime: 60`, `slackOffTime: 30` |
| **预期输出** | `totalHours: 9`, `effectiveHours: 7.25` |
| **后置条件** | 返回对象包含各时长分解 |
| **优先级** | P0 |

**测试步骤**：
1. 调用 `calculateWorkHours()` 函数
2. 验证总时长和有效时长

**断言逻辑**：
```javascript
// 18:00 - 09:00 = 9小时
expect(result.totalHours).toBe(9);
// 9小时 - 1小时休息 - 0.5小时摸鱼 = 7.5小时
expect(result.effectiveHours).toBeCloseTo(7.25, 2);
```

#### TC-CAL-010：跨午夜工作时间计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证跨午夜工作时间计算 |
| **前置条件** | 开始时间晚于结束时间 |
| **输入数据** | `startTime: '22:00'`, `endTime: '06:00'` |
| **预期输出** | `totalHours: 8` |
| **后置条件** | 正确处理24小时循环 |
| **优先级** | P1 |

**测试步骤**：
1. 调用 `calculateWorkHours()` 函数
2. 传入22:00开始、06:00结束
3. 验证总时长计算正确

**断言逻辑**：
```javascript
// (24*60 - 1320) + 360 = 480分钟 = 8小时
expect(result.totalHours).toBe(8);
```

#### TC-CAL-011：边界值——开始时间等于结束时间

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证开始结束时间相同时的特殊处理 |
| **前置条件** | 开始时间等于结束时间 |
| **输入数据** | `startTime: '09:00'`, `endTime: '09:00'` |
| **预期输出** | `totalHours: 0`, `isZeroWorkHours: true` |
| **后置条件** | 触发特殊成就 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result.totalHours).toBe(0);
expect(result.isZeroWorkHours).toBe(true);
```

#### TC-CAL-012：边界值——休息时间等于工作时长

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证休息时间等于工作时长时的处理 |
| **前置条件** | 工作9小时，休息9小时 |
| **输入数据** | `startTime: '09:00'`, `endTime: '18:00'`, `breakTime: 540`, `slackOffTime: 0` |
| **预期输出** | `effectiveHours: 0`, `isZeroWorkHours: true` |
| **后置条件** | 触发"全职休息家"成就 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result.effectiveHours).toBe(0);
```

#### TC-CAL-013：边界值——摸鱼时间等于工作时长

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证摸鱼时间等于工作时长时的处理 |
| **前置条件** | 工作9小时，摸鱼9小时 |
| **输入数据** | `startTime: '09:00'`, `endTime: '18:00'`, `breakTime: 0`, `slackOffTime: 540` |
| **预期输出** | `effectiveHours: 0`, `isZeroWorkHours: true` |
| **后置条件** | 触发"摸鱼仙人"成就 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result.effectiveHours).toBe(0);
```

#### TC-CAL-014：边界值——休息+摸鱼时间超出总时长

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证休息和摸鱼时间总和超出总时长时的处理 |
| **前置条件** | 工作9小时，休息6小时，摸鱼4小时 |
| **输入数据** | `startTime: '09:00'`, `endTime: '18:00'`, `breakTime: 360`, `slackOffTime: 240` |
| **预期输出** | `effectiveHours: 0`（不小于0） |
| **后置条件** | 结果非负 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
// 9 - 6 - 4 = -1，但应该修正为0
expect(result.effectiveHours).toBeGreaterThanOrEqual(0);
```

#### TC-CAL-015：各时间单位精度转换

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证分钟到小时转换的精度处理 |
| **前置条件** | 无 |
| **输入数据** | 各种分钟数值：`15`, `30`, `45`, `90`, `135` |
| **预期输出** | 正确的小时数值 |
| **后置条件** | 保留2位小数 |
| **优先级** | P2 |

**预期结果对照表**：

| 输入（分钟） | 输出（小时） |
|--------------|-------------|
| 15 | 0.25 |
| 30 | 0.50 |
| 45 | 0.75 |
| 90 | 1.50 |
| 135 | 2.25 |

### 2.3 KPI时间密度调整函数测试

#### TC-CAL-016：各KPI等级系数验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各KPI等级对应的时间密度系数 |
| **前置条件** | 有效工作时长8小时 |
| **输入数据** | 5种KPI等级：`S`, `A`, `B`, `C`, `D` |
| **预期输出** | 正确的调整后时长 |
| **后置条件** | 返回稀释比例 |
| **优先级** | P0 |

**测试步骤**：
1. 调用 `applyKPITimeDensity()` 函数
2. 依次传入5种KPI等级
3. 验证返回的系数和调整后时长

**预期结果对照表**：

| KPI等级 | 时间密度系数 | 8小时调整后 | 稀释比例 |
|---------|-------------|-------------|----------|
| S | 1.05 | 8.40 | 95.24% |
| A | 1.10 | 8.80 | 90.91% |
| B | 1.15 | 9.20 | 86.96% |
| C | 1.20 | 9.60 | 83.33% |
| D | 1.30 | 10.40 | 76.92% |

**断言逻辑**：
```javascript
expect(result.kpiFactor).toBe(1.05);
expect(result.adjustedHours).toBeCloseTo(8.4, 2);
expect(result.dilutedWageRatio).toBeCloseTo(0.9524, 4);
```

#### TC-CAL-017：KPI调整后时薪计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证KPI调整对时薪的稀释效果 |
| **前置条件** | 基础时薪100元，有效工作8小时 |
| **输入数据** | `effectiveHours: 8`, `kpiLevel: 'D'` |
| **预期输出** | 稀释后时薪76.92元 |
| **后置条件** | 计算结果合理 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
// 100 * (8 / 10.4) = 76.92
expect(result.dilutedWageRatio).toBeCloseTo(0.7692, 4);
```

### 2.4 硬性指标扣除函数测试

#### TC-CAL-018：房租时亏计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证月均房租转换为时亏的计算 |
| **前置条件** | 月工作天数21.75天 |
| **输入数据** | `hourlyBase: 100`, `workDays: 21.75`, `monthlyRent: 3000` |
| **预期输出** | `rentHourlyLoss: 17.24` |
| **后置条件** | 计算结果保留2位小数 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
// 3000 ÷ 21.75 ÷ 8 = 17.24元/小时
expect(result.rentHourlyLoss).toBeCloseTo(17.24, 2);
```

#### TC-CAL-019：餐费时均成本计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证日均餐费转换为时均成本的计算 |
| **前置条件** | 有效工作时长8小时 |
| **输入数据** | `hourlyBase: 100`, `effectiveHours: 8`, `dailyMealCost: 50` |
| **预期输出** | `mealHourlyCost: 6.25` |
| **后置条件** | 计算结果保留2位小数 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
// 50 ÷ 8 = 6.25元/小时
expect(result.mealHourlyCost).toBeCloseTo(6.25, 2);
```

#### TC-CAL-020：零值房租和餐费处理

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证房租和餐费为0时的处理 |
| **前置条件** | 无 |
| **输入数据** | `monthlyRent: 0`, `dailyMealCost: 0` |
| **预期输出** | `rentHourlyLoss: 0`, `mealHourlyCost: 0` |
| **后置条件** | 不抛出异常 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result.rentHourlyLoss).toBe(0);
expect(result.mealHourlyCost).toBe(0);
```

#### TC-CAL-021：有效工作时长为0时餐费计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证有效工作时长为0时避免除零错误 |
| **前置条件** | 有效工作时长0 |
| **输入数据** | `hourlyBase: 100`, `effectiveHours: 0`, `dailyMealCost: 50` |
| **预期输出** | `mealHourlyCost: 0` |
| **后置条件** | 不抛出除零异常 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
// 有效时长为0时，餐费时均成本应为0
expect(result.mealHourlyCost).toBe(0);
```

#### TC-CAL-022：硬性扣除合计计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证房租时亏和餐费时均成本的合计扣除 |
| **前置条件** | 房租3000元，餐费50元 |
| **输入数据** | `rentHourlyLoss: 17.24`, `mealHourlyCost: 6.25` |
| **预期输出** | `totalDeduction: 23.49`, `afterDeductions: 76.51` |
| **后置条件** | 计算结果正确 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result.totalDeduction).toBeCloseTo(23.49, 2);
expect(result.afterDeductions).toBeCloseTo(76.51, 2);
```

### 2.5 软性条件倍率函数测试

#### TC-CAL-023：各评分等级系数验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证工作氛围、同事关系、工位环境各评分等级对应的系数 |
| **前置条件** | 无 |
| **输入数据** | 各评分1-5星 |
| **预期输出** | 对应的系数值 |
| **后置条件** | 返回系数和标签 |
| **优先级** | P0 |

**预期结果对照表**：

| 评分 | 氛围系数 | 同事系数 | 工位系数 |
|------|---------|---------|---------|
| 1星 | 0.85 | 0.85 | 0.85 |
| 2星 | 0.92 | 0.92 | 0.92 |
| 3星 | 1.00 | 1.00 | 1.00 |
| 4星 | 1.08 | 1.08 | 1.08 |
| 5星 | 1.15 | 1.15 | 1.15 |

**断言逻辑**：
```javascript
expect(result.atmosphereFactor).toBe(1.08);
expect(result.colleagueFactor).toBe(1.00);
expect(result.workspaceFactor).toBe(1.15);
```

#### TC-CAL-024：软性倍率合计计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证三个软性系数相乘得到总倍率 |
| **前置条件** | 各评分均为4星 |
| **输入数据** | `wage: 100`, `atmosphereRating: 4`, `colleagueRating: 4`, `workspaceRating: 4` |
| **预期输出** | `totalFactor: 1.1664`, `finalWage: 116.64` |
| **后置条件** | 结果保留4位小数 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
// 1.08 × 1.08 × 1.08 = 1.1664
expect(result.totalFactor).toBeCloseTo(1.1664, 4);
expect(result.finalWage).toBeCloseTo(116.64, 2);
```

#### TC-CAL-025：低评分对时薪的负面影响

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证低评分（1星）对时薪的负面影响 |
| **前置条件** | 时薪基准100元 |
| **输入数据** | `atmosphereRating: 1`, `colleagueRating: 1`, `workspaceRating: 1` |
| **预期输出** | `totalFactor: 0.614125`, `finalWage: 61.41` |
| **后置条件** | 计算结果合理 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
// 0.85 × 0.85 × 0.85 = 0.614125
expect(result.finalWage).toBeCloseTo(61.41, 2);
```

#### TC-CAL-026：混合评分的最终时薪

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证混合评分下的最终时薪计算 |
| **前置条件** | 时薪基准100元 |
| **输入数据** | `atmosphereRating: 5`, `colleagueRating: 3`, `workspaceRating: 2` |
| **预期输出** | `finalWage: 112.9` |
| **后置条件** | 计算结果正确 |
| **优先级** | P2 |

**断言逻辑**：
```javascript
// 1.15 × 1.00 × 0.92 = 1.058
expect(result.finalWage).toBeCloseTo(105.80, 2);
```

### 2.6 特殊成就处理函数测试

#### TC-CAL-027：时间静止者成就

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证工作时长为0时触发时间静止者成就 |
| **前置条件** | 有效工作时长0 |
| **输入数据** | `workHours: { isZeroWorkHours: true, ... }` |
| **预期输出** | 返回时间静止者成就对象 |
| **后置条件** | 成就信息完整 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
expect(result[0].id).toBe('timeStopper');
expect(result[0].emoji).toBe('⌛');
expect(result[0].title).toBe('时间静止者');
```

#### TC-CAL-028：全职休息家成就

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证休息时间等于工作时长时触发全职休息家成就 |
| **前置条件** | 休息时间 >= 工作时长 |
| **输入数据** | `workHours: { breakHours: 8, totalHours: 8, ... }` |
| **预期输出** | 返回全职休息家成就对象 |
| **后置条件** | 成就信息完整 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
expect(result[0].id).toBe('fullRest');
expect(result[0].emoji).toBe('🛋️');
```

#### TC-CAL-029：摸鱼仙人成就

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证摸鱼时间等于工作时长时触发摸鱼仙人成就 |
| **前置条件** | 摸鱼时间 >= 工作时长 |
| **输入数据** | `workHours: { slackHours: 8, totalHours: 8, ... }` |
| **预期输出** | 返回摸鱼仙人成就对象 |
| **后置条件** | 成就信息完整 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
expect(result[0].id).toBe('slackMaster');
expect(result[0].emoji).toBe('🐟');
```

#### TC-CAL-030：通勤马拉松成就

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证通勤时间超过2小时时触发通勤马拉松成就 |
| **前置条件** | 通勤时间 > 120分钟 |
| **输入数据** | `commuteTime: 150` |
| **预期输出** | 返回通勤马拉松成就对象 |
| **后置条件** | 条件描述包含实际通勤时间 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result[0].id).toBe('commuteMarathon');
expect(result[0].condition).toContain('150');
```

#### TC-CAL-031：房奴日记成就

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证月均房租超过5000元时触发房奴日记成就 |
| **前置条件** | 月均房租 > 5000 |
| **输入数据** | `monthlyRent: 6000` |
| **预期输出** | 返回房奴日记成就对象 |
| **后置条件** | 条件描述包含实际房租金额 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result[0].id).toBe('rentSlave');
expect(result[0].condition).toContain('6000');
```

#### TC-CAL-032：KPI地狱成就

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证KPI等级为D时触发KPI地狱成就 |
| **前置条件** | KPI等级 = 'D' |
| **输入数据** | `kpiLevel: 'D'` |
| **预期输出** | 返回KPI地狱成就对象 |
| **后置条件** | 成就信息完整 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result[0].id).toBe('kpiHell');
expect(result[0].emoji).toBe('💼');
```

#### TC-CAL-033：多个成就同时触发

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证多个成就条件同时满足时返回所有成就 |
| **前置条件** | 满足多个成就触发条件 |
| **输入数据** | `workHours: { isZeroWorkHours: true }`, `commuteTime: 150`, `monthlyRent: 6000` |
| **预期输出** | 返回包含3个成就的数组 |
| **后置条件** | 成就按优先级排序 |
| **优先级** | P2 |

**断言逻辑**：
```javascript
expect(result.length).toBe(3);
expect(result.find(a => a.id === 'timeStopper')).toBeDefined();
expect(result.find(a => a.id === 'commuteMarathon')).toBeDefined();
expect(result.find(a => a.id === 'rentSlave')).toBeDefined();
```

### 2.7 时薪主题获取函数测试

#### TC-CAL-034：各时薪区间主题验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各时薪区间返回正确的主题配置 |
| **前置条件** | 无 |
| **输入数据** | 各边界时薪值 |
| **预期输出** | 对应的主题配置 |
| **后置条件** | 返回对象包含theme、emoji、title、badge |
| **优先级** | P0 |

**预期结果对照表**：

| 时薪区间 | 主题 | emoji | 成就标签 |
|----------|------|-------|----------|
| < 0 | negative | 💸 | 付费上班 |
| 0-20 | dark | 🌑 | 时薪难民 |
| 20-40 | difficult | 🔴 | 温饱线挣扎 |
| 40-60 | normal | 🟡 | 普通打工人 |
| 60-80 | good | 🟢 | 中产预备役 |
| 80-120 | excellent | 🔵 | 时薪精英 |
| 120-200 | outstanding | 🟣 | 时薪贵族 |
| >= 200 | legendary | 🟠 | 时薪之神 |

**断言逻辑**：
```javascript
expect(getWageTheme(-10).theme).toBe('negative');
expect(getWageTheme(10).title).toBe('时薪难民');
expect(getWageTheme(250).badge).toBe('时薪之神');
```

#### TC-CAL-035：边界值测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各区间边界值的正确分类 |
| **前置条件** | 无 |
| **输入数据** | 边界值：`0`, `20`, `40`, `60`, `80`, `120`, `200` |
| **预期输出** | 正确的区间分类 |
| **后置条件** | 无 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
// 0应该归类为 dark（>=0 且 <20）
expect(getWageTheme(0).theme).toBe('dark');
// 20应该归类为 difficult（>=20 且 <40）
expect(getWageTheme(20).theme).toBe('difficult');
```

### 2.8 主计算函数测试

#### TC-CAL-036：完整计算流程验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证主计算函数整合所有计算步骤 |
| **前置条件** | 使用标准输入参数 |
| **输入数据** | 完整输入参数对象 |
| **预期输出** | 包含所有计算细节的完整结果 |
| **后置条件** | 返回对象结构完整 |
| **优先级** | P0 |

**测试输入**：
```javascript
const input = {
    salaryType: 'monthly',
    salaryAmount: 15000,
    workDaysType: 'doubleRest',
    customWorkDays: 21.75,
    startTime: '09:00',
    endTime: '18:00',
    breakTime: 60,
    slackOffTime: 30,
    commuteTime: 60,
    monthlyRent: 3000,
    dailyMealCost: 50,
    kpiLevel: 'B',
    atmosphereRating: 4,
    colleagueRating: 3,
    workspaceRating: 4
};
```

**断言逻辑**：
```javascript
const result = calculateHourlyWage(input);
expect(result.specialCase).toBe(false);
expect(result.wage).toBeCloseTo(60.29, 2);
expect(result.calculationSteps.length).toBe(6);
expect(result.funComparisons.length).toBe(6);
```

#### TC-CAL-037：特殊成就优先处理

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证特殊成就触发时直接返回，不进行常规计算 |
| **前置条件** | 工作时长为0 |
| **输入数据** | `startTime: '09:00'`, `endTime: '09:00'` |
| **预期输出** | `specialCase: true`, `wage: Infinity` |
| **后置条件** | 不执行后续计算步骤 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
const result = calculateHourlyWage(input);
expect(result.specialCase).toBe(true);
expect(result.wage).toBe(Infinity);
expect(result.formattedWage).toBe('∞');
```

#### TC-CAL-038：负时薪计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证高房租导致负时薪的情况 |
| **前置条件** | 基础时薪低，房租高 |
| **输入数据** | `salaryType: 'hourly'`, `salaryAmount: 30`, `monthlyRent: 5000`, `dailyMealCost: 50` |
| **预期输出** | `wage: -21.24`, `theme: 'negative'` |
| **后置条件** | 正确识别付费上班状态 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(result.wage).toBeLessThan(0);
expect(result.theme.theme).toBe('negative');
```

---

## 三、main.js 模块测试用例

### 3.1 表单数据获取函数测试

#### TC-MAIN-001：表单数据完整获取

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证getFormData函数正确获取所有表单字段 |
| **前置条件** | DOM中存在完整的表单元素 |
| **输入数据** | 用户填写完整的表单 |
| **预期输出** | 包含所有输入参数的完整对象 |
| **后置条件** | 返回对象格式正确 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
const result = getFormData();
expect(result).toHaveProperty('salaryType');
expect(result).toHaveProperty('salaryAmount');
expect(result).toHaveProperty('workDaysType');
expect(result).toHaveProperty('startTime');
expect(result).toHaveProperty('endTime');
expect(result).toHaveProperty('breakTime');
expect(result).toHaveProperty('slackOffTime');
expect(result).toHaveProperty('commuteTime');
expect(result).toHaveProperty('monthlyRent');
expect(result).toHaveProperty('dailyMealCost');
expect(result).toHaveProperty('kpiLevel');
expect(result).toHaveProperty('atmosphereRating');
expect(result).toHaveProperty('colleagueRating');
expect(result).toHaveProperty('workspaceRating');
```

#### TC-MAIN-002：空值处理

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证空输入字段的正确处理 |
| **前置条件** | 部分表单字段为空 |
| **输入数据** | `salaryAmount: ''`, `monthlyRent: ''` |
| **预期输出** | 空值转换为0 |
| **后置条件** | 无NaN值 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
const result = getFormData();
expect(result.salaryAmount).toBe(0);
expect(result.monthlyRent).toBe(0);
expect(isNaN(result.salaryAmount)).toBe(false);
```

#### TC-MAIN-003：自定义天数获取

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证工作制度为自定义时正确获取自定义天数 |
| **前置条件** | 选择"自定义"工作制度 |
| **输入数据** | `workDaysType: 'custom'`, `customWorkDays: 22` |
| **预期输出** | `customWorkDays: 22` |
| **后置条件** | 使用用户输入的自定义天数 |
| **优先级** | P1 |

### 3.2 表单数据验证函数测试

#### TC-MAIN-004：有效数据验证通过

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证有效数据通过验证 |
| **前置条件** | 无 |
| **输入数据** | 完整的有效表单数据 |
| **预期输出** | `{ valid: true, errors: [] }` |
| **后置条件** | 无错误信息 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
const result = validateFormData(validInput);
expect(result.valid).toBe(true);
expect(result.errors).toHaveLength(0);
```

#### TC-MAIN-005：薪酬金额为0验证失败

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证薪酬金额为0时验证失败 |
| **前置条件** | 无 |
| **输入数据** | `salaryAmount: 0` |
| **预期输出** | `{ valid: false, errors: ['请输入有效的薪酬金额'] }` |
| **后置条件** | 返回错误信息 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
const result = validateFormData({ ...validInput, salaryAmount: 0 });
expect(result.valid).toBe(false);
expect(result.errors).toContain('请输入有效的薪酬金额');
```

#### TC-MAIN-006：薪酬金额超出上限验证失败

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各薪酬类型金额超出上限时验证失败 |
| **前置条件** | 无 |
| **输入数据** | `salaryType: 'hourly'`, `salaryAmount: 6000` |
| **预期输出** | `{ valid: false, errors: [...] }` |
| **后置条件** | 返回对应类型的上限错误 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
const result = validateFormData({ salaryType: 'hourly', salaryAmount: 6000 });
expect(result.valid).toBe(false);
expect(result.errors[0]).toContain('5000');
```

#### TC-MAIN-007：自定义天数超出范围验证失败

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证自定义天数超出0-31范围时验证失败 |
| **前置条件** | 工作制度为自定义 |
| **输入数据** | `workDaysType: 'custom'`, `customWorkDays: 35` |
| **预期输出** | `{ valid: false, errors: ['请输入0-31之间的自定义天数'] }` |
| **后置条件** | 返回范围错误 |
| **优先级** | P1 |

#### TC-MAIN-008：结束时间不晚于开始时间验证失败

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证结束时间不晚于开始时间时验证失败 |
| **前置条件** | 无 |
| **输入数据** | `startTime: '10:00'`, `endTime: '09:00'` |
| **预期输出** | `{ valid: false, errors: ['结束时间必须晚于开始时间'] }` |
| **后置条件** | 包含时间错误 |
| **优先级** | P0 |

#### TC-MAIN-009：休息+摸鱼时间超出总时长验证失败

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证休息和摸鱼时间总和超出工作时长时验证失败 |
| **前置条件** | 无 |
| **输入数据** | `startTime: '09:00'`, `endTime: '18:00'`, `breakTime: 300`, `slackOffTime: 300` |
| **预期输出** | `{ valid: false, errors: ['休息时间和摸鱼时间不能超过总工作时长'] }` |
| **后置条件** | 返回时间冲突错误 |
| **优先级** | P0 |

#### TC-MAIN-010：房租超出范围验证失败

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证月均房租超出0-50000范围时验证失败 |
| **前置条件** | 无 |
| **输入数据** | `monthlyRent: 60000` |
| **预期输出** | `{ valid: false, errors: ['月均房租必须在0-50000元之间'] }` |
| **后置条件** | 返回范围错误 |
| **优先级** | P1 |

#### TC-MAIN-011：餐费超出范围验证失败

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证日均餐费超出0-500范围时验证失败 |
| **前置条件** | 无 |
| **输入数据** | `dailyMealCost: 600` |
| **预期输出** | `{ valid: false, errors: ['日均餐费必须在0-500元之间'] }` |
| **后置条件** | 返回范围错误 |
| **优先级** | P1 |

#### TC-MAIN-012：多个验证错误同时返回

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证多个验证错误时返回所有错误信息 |
| **前置条件** | 无 |
| **输入数据** | 多项非法输入 |
| **预期输出** | 包含多个错误信息的数组 |
| **后置条件** | 错误信息按优先级排序 |
| **优先级** | P2 |

**断言逻辑**：
```javascript
const result = validateFormData(invalidInput);
expect(result.errors.length).toBeGreaterThan(1);
```

---

## 四、renderer.js 模块测试用例

### 4.1 成就卡片渲染函数测试

#### TC-REN-001：普通结果卡片渲染

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证普通计算结果正确渲染成就卡片 |
| **前置条件** | 计算结果非特殊成就 |
| **输入数据** | 包含主题配置的计算结果 |
| **预期输出** | 卡片应用对应主题样式 |
| **后置条件** | 卡片可见 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
renderAchievementCard(result, container);
expect(card.classList.contains('theme-normal')).toBe(true);
expect(emoji.textContent).toBe('🟡');
expect(title.textContent).toBe('普通打工人');
```

#### TC-REN-002：特殊成就卡片渲染

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证特殊成就结果正确渲染特殊成就卡片 |
| **前置条件** | 计算结果为特殊成就 |
| **输入数据** | 包含特殊成就的结果 |
| **预期输出** | 卡片显示特殊成就内容 |
| **后置条件** | 显示成就描述 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
expect(card.classList.contains('special-achievement')).toBe(true);
expect(emoji.textContent).toBe('⌛');
expect(wageElement.textContent).toBe('∞');
```

#### TC-REN-003：各主题样式类验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证8种主题对应正确的CSS类 |
| **前置条件** | 无 |
| **输入数据** | 各主题配置 |
| **预期输出** | 应用正确的CSS类 |
| **后置条件** | 样式正确应用 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(getThemeForWage(-10).theme).toBe('negative');
expect(getThemeForWage(10).theme).toBe('dark');
expect(getThemeForWage(30).theme).toBe('difficult');
expect(getThemeForWage(50).theme).toBe('normal');
expect(getThemeForWage(70).theme).toBe('good');
expect(getThemeForWage(100).theme).toBe('excellent');
expect(getThemeForWage(150).theme).toBe('outstanding');
expect(getThemeForWage(250).theme).toBe('legendary');
```

### 4.2 趣味换算渲染函数测试

#### TC-REN-004：趣味换算列表渲染

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证趣味换算正确渲染为列表 |
| **前置条件** | 有换算数据 |
| **输入数据** | 6条趣味换算数据 |
| **预期输出** | 6个换算项目 |
| **后置条件** | 列表可见 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
renderFunComparisons(comparisons, container);
expect(comparisonSection.style.display).toBe('block');
expect(comparisonItems.children.length).toBe(6);
```

#### TC-REN-005：空趣味换算处理

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证无趣味换算数据时隐藏换算区域 |
| **前置条件** | 无换算数据 |
| **输入数据** | `null` 或空数组 |
| **预期输出** | 换算区域隐藏 |
| **后置条件** | 不显示空白区域 |
| **优先级** | P2 |

**断言逻辑**：
```javascript
renderFunComparisons([], container);
expect(comparisonSection.style.display).toBe('none');
```

### 4.3 计算过程渲染函数测试

#### TC-REN-006：计算过程步骤渲染

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证计算过程正确渲染为步骤列表 |
| **前置条件** | 有计算步骤数据 |
| **输入数据** | 6个计算步骤 |
| **预期输出** | 6个步骤容器 |
| **后置条件** | 各步骤内容正确 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
renderCalculationProcess(steps, container);
expect(processSteps.children.length).toBe(6);
expect(processSteps.innerHTML).toContain('薪酬转换');
expect(processSteps.innerHTML).toContain('工作时长调整');
expect(processSteps.innerHTML).toContain('KPI时间密度调整');
expect(processSteps.innerHTML).toContain('硬性指标扣除');
expect(processSteps.innerHTML).toContain('软性条件倍率');
expect(processSteps.innerHTML).toContain('最终结果');
```

#### TC-CAL-007：计算步骤样式类验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证计算步骤应用正确的样式类 |
| **前置条件** | 无 |
| **输入数据** | 带样式的步骤数据 |
| **预期输出** | 应用highlight、positive、negative类 |
| **后置条件** | 样式正确显示 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
expect(container.querySelector('.highlight')).toBeDefined();
expect(container.querySelector('.positive')).toBeDefined();
expect(container.querySelector('.negative')).toBeDefined();
```

### 4.4 星级评分渲染函数测试

#### TC-REN-008：星级评分交互测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证星级评分的点击和悬停交互 |
| **前置条件** | 存在星级评分元素 |
| **输入数据** | 默认评分3星 |
| **预期输出** | 点击后更新评分 |
| **后置条件** | 回调函数被调用 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
initStarRating('atmosphereRating', 3, callback);
stars[4].click();
expect(currentRating).toBe(5);
expect(callback).toHaveBeenCalledWith(5);
```

### 4.5 滑块值渲染函数测试

#### TC-REN-009：滑块值显示更新测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证滑块值正确显示和更新 |
| **前置条件** | 存在滑块元素 |
| **输入数据** | 滑块值60分钟 |
| **预期输出** | 显示"1小时"或"60分钟" |
| **后置条件** | 单位正确 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
slider.value = 60;
slider.dispatchEvent(new Event('input'));
expect(valueDisplay.textContent).toContain('1小时');
```

---

## 五、集成测试用例

### 5.1 完整计算流程集成测试

#### TC-INT-001：月薪转时薪完整流程

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证从月薪输入到最终时薪的完整计算流程 |
| **前置条件** | 用户填写完整表单并提交 |
| **输入数据** | 月薪15000元，双休，标准工作8小时 |
| **预期输出** | 正确的最终时薪和完整计算过程 |
| **后置条件** | 结果正确展示 |
| **优先级** | P0 |

**测试步骤**：
1. 用户填写月薪15000元
2. 选择双休工作制度
3. 设置工作时间09:00-18:00
4. 设置休息60分钟，摸鱼30分钟
5. 设置月均房租3000元，日均餐费50元
6. 选择KPI等级B
7. 设置氛围4星、同事3星、工位4星
8. 点击计算按钮
9. 验证计算结果和展示

**预期结果**：
- 最终时薪：约60.29元/小时
- 主题：普通打工人（🟡）
- 包含所有计算步骤展示

#### TC-INT-002：年薪转时薪完整流程

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证年薪输入的完整计算流程 |
| **前置条件** | 用户选择年薪类型 |
| **输入数据** | 年薪360000元 |
| **预期输出** | 正确的时薪计算结果 |
| **后置条件** | 转换公式正确应用 |
| **优先级** | P0 |

**预期计算过程**：
```
年薪360000 ÷ 12月 = 月薪30000
月薪30000 ÷ 21.75天 ÷ 8小时 = 172.41元/小时
```

#### TC-INT-003：特殊成就触发集成测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证特殊成就条件满足时正确展示成就卡片 |
| **前置条件** | 设置触发特殊成就的参数 |
| **输入数据** | 开始时间等于结束时间 |
| **预期输出** | 显示"时间静止者"成就 |
| **后置条件** | 不显示常规结果 |
| **优先级** | P0 |

**测试步骤**：
1. 设置开始时间09:00
2. 设置结束时间09:00
3. 点击计算
4. 验证显示特殊成就卡片

### 5.2 表单验证与计算集成测试

#### TC-INT-004：验证失败阻止计算

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证验证失败时阻止计算并显示错误 |
| **前置条件** | 无 |
| **输入数据** | 无效的表单数据 |
| **预期输出** | 显示验证错误，不调用计算 |
| **后置条件** | 结果区域保持隐藏 |
| **优先级** | P0 |

**断言逻辑**：
```javascript
const validation = validateFormData(invalidData);
expect(validation.valid).toBe(false);
expect(calculateHourlyWage).not.toHaveBeenCalled();
```

#### TC-INT-005：异步计算流程测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证计算过程中的加载状态和结果展示 |
| **前置条件** | 无 |
| **输入数据** | 有效表单数据 |
| **预期输出** | 显示加载状态，计算完成后展示结果 |
| **后置条件** | 加载状态正确隐藏 |
| **优先级** | P1 |

**测试步骤**：
1. 点击计算按钮
2. 验证按钮显示"计算中..."
3. 验证按钮被禁用
4. 等待计算完成
5. 验证结果区域显示
6. 验证按钮恢复正常

### 5.3 UI交互集成测试

#### TC-INT-006：薪酬类型切换联动

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证切换薪酬类型时单位标签正确更新 |
| **前置条件** | 无 |
| **输入数据** | 切换到各薪酬类型 |
| **预期输出** | 单位标签同步更新 |
| **后置条件** | 输入框单位正确 |
| **优先级** | P1 |

**测试步骤**：
1. 选择"时薪"类型
2. 验证单位显示"元/小时"
3. 选择"日薪"类型
4. 验证单位显示"元/天"
5. 以此类推...

#### TC-INT-007：工作制度切换联动

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证切换工作制度时自定义输入框正确显示/隐藏 |
| **前置条件** | 无 |
| **输入数据** | 选择"自定义"或预设选项 |
| **预期输出** | 自定义输入框正确响应 |
| **后置条件** | 验证逻辑正确应用 |
| **优先级** | P1 |

**断言逻辑**：
```javascript
renderCustomDaysInput('custom');
expect(customGroup.classList.contains('hidden')).toBe(false);

renderCustomDaysInput('doubleRest');
expect(customGroup.classList.contains('hidden')).toBe(true);
```

#### TC-INT-008：星级评分联动

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证星级评分时标签文字正确更新 |
| **前置条件** | 无 |
| **输入数据** | 选择各星级 |
| **预期输出** | 标签文字对应变化 |
| **后置条件** | 文字描述正确 |
| **优先级** | P2 |

**预期结果对照表**：

| 氛围评分 | 标签文字 |
|----------|----------|
| 1星 | 非常压抑 |
| 2星 | 有些压抑 |
| 3星 | 一般般 |
| 4星 | 比较舒适 |
| 5星 | 非常舒适 |

---

## 六、功能测试用例

### 6.1 薪酬计算功能测试

#### TC-FUN-001：时薪计算准确性

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各类薪酬转换为时薪的准确性 |
| **前置条件** | 无 |
| **测试数据** | 多种薪酬组合 |
| **预期输出** | 计算结果误差在±0.01元以内 |
| **优先级** | P0 |

**测试用例矩阵**：

| 薪酬类型 | 输入金额 | 工作制度 | 预期时薪 |
|----------|----------|----------|----------|
| 时薪 | 100 | 双休 | 100.00 |
| 日薪 | 800 | 双休 | 100.00 |
| 月薪 | 17400 | 双休 | 100.00 |
| 年薪 | 208800 | 双休 | 100.00 |
| 月薪 | 15000 | 上四休三 | 108.70 |
| 月薪 | 15000 | 双休 | 86.21 |
| 月薪 | 15000 | 单休 | 72.12 |

#### TC-FUN-002：生活成本扣除功能

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证房租和餐费对时薪的扣除计算 |
| **前置条件** | 基础时薪100元 |
| **测试数据** | 多种成本组合 |
| **预期输出** | 正确的扣除后时薪 |
| **优先级** | P0 |

**测试用例矩阵**：

| 月均房租 | 日均餐费 | 预期扣除 | 预期时薪 |
|----------|----------|----------|----------|
| 0 | 0 | 0.00 | 100.00 |
| 3000 | 0 | 17.24 | 82.76 |
| 0 | 50 | 6.25 | 93.75 |
| 3000 | 50 | 23.49 | 76.51 |
| 5000 | 100 | 35.71 | 64.29 |

#### TC-FUN-003：KPI稀释效果验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各KPI等级对时薪的稀释效果 |
| **前置条件** | 基础时薪100元，有效工作8小时 |
| **测试数据** | 5种KPI等级 |
| **预期输出** | 正确的稀释后时薪 |
| **优先级** | P1 |

**预期结果对照表**：

| KPI等级 | 时间密度系数 | 调整后时长 | 预期时薪 |
|---------|-------------|------------|----------|
| S | 1.05 | 8.40 | 95.24 |
| A | 1.10 | 8.80 | 90.91 |
| B | 1.15 | 9.20 | 86.96 |
| C | 1.20 | 9.60 | 83.33 |
| D | 1.30 | 10.40 | 76.92 |

#### TC-FUN-004：软性倍率效果验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证软性条件对时薪的倍率调节效果 |
| **前置条件** | 调整后时薪100元 |
| **测试数据** | 各评分组合 |
| **预期输出** | 正确的最终时薪 |
| **优先级** | P1 |

**测试用例矩阵**：

| 氛围 | 同事 | 工位 | 总倍率 | 预期时薪 |
|------|------|------|--------|----------|
| 3星 | 3星 | 3星 | 1.0000 | 100.00 |
| 5星 | 5星 | 5星 | 1.5209 | 152.09 |
| 1星 | 1星 | 1星 | 0.6141 | 61.41 |
| 4星 | 4星 | 4星 | 1.1664 | 116.64 |

### 6.2 成就系统功能测试

#### TC-FUN-005：时间静止者成就触发

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证工作时长为0时触发时间静止者成就 |
| **前置条件** | 无 |
| **输入数据** | `startTime: '09:00'`, `endTime: '09:00'` |
| **预期输出** | 显示时间静止者成就卡片 |
| **优先级** | P0 |

#### TC-FUN-006：全职休息家成就触发

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证休息时间等于工作时长时触发全职休息家成就 |
| **前置条件** | 无 |
| **输入数据** | 工作9小时，休息9小时 |
| **预期输出** | 显示全职休息家成就卡片 |
| **优先级** | P0 |

#### TC-FUN-007：摸鱼仙人成就触发

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证摸鱼时间等于工作时长时触发摸鱼仙人成就 |
| **前置条件** | 无 |
| **输入数据** | 工作9小时，摸鱼9小时 |
| **预期输出** | 显示摸鱼仙人成就卡片 |
| **优先级** | P0 |

#### TC-FUN-008：通勤马拉松成就触发

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证通勤时间超过2小时时触发通勤马拉松成就 |
| **前置条件** | 无 |
| **输入数据** | `commuteTime: 150` |
| **预期输出** | 显示通勤马拉松成就 |
| **优先级** | P1 |

#### TC-FUN-009：房奴日记成就触发

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证月均房租超过5000元时触发房奴日记成就 |
| **前置条件** | 无 |
| **输入数据** | `monthlyRent: 6000` |
| **预期输出** | 显示房奴日记成就 |
| **优先级** | P1 |

#### TC-FUN-010：KPI地狱成就触发

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证KPI等级为D时触发KPI地狱成就 |
| **前置条件** | 无 |
| **输入数据** | `kpiLevel: 'D'` |
| **预期输出** | 显示KPI地狱成就 |
| **优先级** | P1 |

### 6.3 主题展示功能测试

#### TC-FUN-011：各时薪区间主题展示

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各时薪区间正确应用对应主题 |
| **前置条件** | 无 |
| **测试数据** | 各边界时薪值 |
| **预期输出** | 正确的主题和成就标签 |
| **优先级** | P0 |

**测试用例矩阵**：

| 时薪 | 主题 | 主色调 | 成就标签 |
|------|------|--------|----------|
| -10 | negative | 红色 | 付费上班 |
| 15 | dark | 深红 | 时薪难民 |
| 35 | difficult | 橙红 | 温饱线挣扎 |
| 55 | normal | 金黄 | 普通打工人 |
| 75 | good | 绿色 | 中产预备役 |
| 110 | excellent | 蓝色 | 时薪精英 |
| 180 | outstanding | 紫色 | 时薪贵族 |
| 250 | legendary | 金橙 | 时薪之神 |

### 6.4 趣味换算功能测试

#### TC-FUN-012：趣味换算内容验证

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证趣味换算内容正确生成 |
| **前置条件** | 最终时薪60元 |
| **输入数据** | 时薪60元 |
| **预期输出** | 正确的换算数量 |
| **优先级** | P2 |

**预期结果对照表**：

| 商品 | 单价 | 预期换算数量 |
|------|------|--------------|
| 奶茶 | 15元 | 4.0杯 |
| 麦当劳巨无霸 | 30元 | 2.0个 |
| 电影票 | 60元 | 1.0张 |
| 奶茶(大杯) | 20元 | 3.0杯 |
| 星巴克中杯 | 35元 | 1.7杯 |
| 必胜客披萨 | 80元 | 0.8份 |

---

## 七、异常与边界条件测试

### 7.1 数值边界测试

#### TC-BOUND-001：薪酬类型边界值测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证各薪酬类型在边界值处的计算行为 |
| **前置条件** | 无 |
| **测试数据** | 各类型最小值、最大值、临界值 |
| **预期输出** | 正确处理，不溢出或异常 |
| **优先级** | P1 |

**测试用例矩阵**：

| 薪酬类型 | 测试值 | 预期行为 |
|----------|--------|----------|
| 时薪 | 0.01 | 正确计算 |
| 时薪 | 5000 | 正确计算 |
| 时薪 | 5000.01 | 验证失败 |
| 日薪 | 0.01 | 正确计算 |
| 日薪 | 50000 | 正确计算 |
| 月薪 | 0.01 | 正确计算 |
| 月薪 | 500000 | 正确计算 |
| 年薪 | 0.01 | 正确计算 |
| 年薪 | 5000000 | 正确计算 |

#### TC-BOUND-002：工作天数边界值测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证自定义工作天数在边界值处的处理 |
| **前置条件** | 工作制度选择自定义 |
| **测试数据** | 0, 0.5, 15.5, 31, 31.5 |
| **预期输出** | 正确处理 |
| **优先级** | P1 |

**测试用例矩阵**：

| 自定义天数 | 预期行为 |
|------------|----------|
| 0 | 验证失败（最小0，但实际计算会得0时薪） |
| 0.5 | 正确计算 |
| 15.5 | 正确计算 |
| 31 | 正确计算 |
| 31.5 | 验证失败（超出范围） |

#### TC-BOUND-003：时间参数边界值测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证时间参数在边界值处的处理 |
| **前置条件** | 无 |
| **测试数据** | 各时间参数的最小值、最大值 |
| **预期输出** | 正确处理 |
| **优先级** | P1 |

**测试用例矩阵**：

| 参数 | 测试值 | 预期行为 |
|------|--------|----------|
| 休息时间 | 0 | 正确计算 |
| 休息时间 | 总时长 | 触发特殊成就 |
| 摸鱼时间 | 0 | 正确计算 |
| 摸鱼时间 | 总时长 | 触发特殊成就 |
| 通勤时间 | 0 | 正确计算 |
| 通勤时间 | 10000 | 正确计算（无上限） |

### 7.2 特殊场景测试

#### TC-SPEC-001：所有参数为默认值

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证使用所有默认值时的计算行为 |
| **前置条件** | 无 |
| **输入数据** | 所有参数使用默认值 |
| **预期输出** | 正确计算 |
| **优先级** | P2 |

**默认参数**：
```javascript
const defaults = {
    salaryType: 'monthly',
    salaryAmount: 0,  // 注意：金额0会验证失败
    workDaysType: 'doubleRest',
    startTime: '09:00',
    endTime: '18:00',
    breakTime: 60,
    slackOffTime: 30,
    commuteTime: 60,
    monthlyRent: 0,
    dailyMealCost: 50,
    kpiLevel: 'B',
    atmosphereRating: 3,
    colleagueRating: 3,
    workspaceRating: 3
};
```

#### TC-SPEC-002：极端组合测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证极端参数组合时的计算行为 |
| **前置条件** | 无 |
| **输入数据** | 所有参数设为极端值 |
| **预期输出** | 正确处理，不崩溃 |
| **优先级** | P2 |

**极端组合**：
- 最高年薪：5,000,000元/年
- 最多工作天数：31天
- 最少休息/摸鱼：0
- 最高房租：50,000元
- 最高餐费：500元
- 最低软性评分：1星
- 最高KPI等级：D级

#### TC-SPEC-003：负时薪场景测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证高成本导致负时薪的场景 |
| **前置条件** | 无 |
| **输入数据** | 低时薪 + 高房租 + 高餐费 |
| **预期输出** | 负时薪，正确应用主题 |
| **优先级** | P1 |

**测试用例**：
```javascript
const input = {
    salaryType: 'hourly',
    salaryAmount: 30,      // 低时薪
    monthlyRent: 5000,     // 高房租
    dailyMealCost: 100     // 高餐费
};
```

**预期结果**：
- 时薪为负数
- 主题为"付费上班"
- 显示正确的成就卡片

---

## 八、性能与兼容性测试

### 8.1 性能测试

#### TC-PERF-001：计算响应时间测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证计算响应时间在要求范围内 |
| **前置条件** | 无 |
| **测试方法** | 多次测量计算时间 |
| **预期输出** | 平均响应时间 ≤ 100ms |
| **优先级** | P2 |

**测试方法**：
```javascript
const times = [];
for (let i = 0; i < 100; i++) {
    const start = performance.now();
    calculateHourlyWage(validInput);
    const end = performance.now();
    times.push(end - start);
}
const avgTime = times.reduce((a, b) => a + b) / times.length;
expect(avgTime).toBeLessThan(100);
```

#### TC-PERF-002：渲染更新时间测试

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证渲染更新时间在要求范围内 |
| **前置条件** | 无 |
| **测试方法** | 多次测量渲染时间 |
| **预期输出** | 平均渲染时间 ≤ 200ms |
| **优先级** | P2 |

### 8.2 浏览器兼容性测试

#### TC-COMP-001：现代浏览器兼容性

| 属性 | 内容 |
|------|------|
| **测试目的** | 验证在目标浏览器中的兼容性 |
| **前置条件** | 各目标浏览器环境 |
| **测试数据** | 标准输入数据 |
| **预期输出** | 在所有目标浏览器中正确运行 |
| **优先级** | P1 |

**目标浏览器**：

| 浏览器 | 最低版本 | 测试状态 |
|--------|----------|----------|
| Chrome | 80+ | ✅ 需测试 |
| Edge | 80+ | ✅ 需测试 |
| Safari | 14+ | ✅ 需测试 |
| Firefox | 75+ | ✅ 需测试 |

---

## 九、测试用例汇总

### 9.1 用例统计

| 测试类型 | P0用例数 | P1用例数 | P2用例数 | 总计 |
|----------|----------|----------|----------|------|
| 单元测试 | 12 | 28 | 12 | 52 |
| 集成测试 | 6 | 5 | 3 | 14 |
| 功能测试 | 8 | 8 | 4 | 20 |
| 边界测试 | 0 | 6 | 3 | 9 |
| 性能测试 | 0 | 0 | 2 | 2 |
| **总计** | **26** | **47** | **24** | **97** |

### 9.2 关键路径测试覆盖

| 功能模块 | 核心路径覆盖 | 边界覆盖 | 异常覆盖 |
|----------|-------------|----------|----------|
| 薪酬转换 | ✅ 100% | ✅ 100% | ✅ 100% |
| 工作时长计算 | ✅ 100% | ✅ 100% | ✅ 100% |
| KPI调整 | ✅ 100% | ✅ 100% | - |
| 硬性扣除 | ✅ 100% | ✅ 100% | ✅ 100% |
| 软性倍率 | ✅ 100% | ✅ 100% | - |
| 特殊成就 | ✅ 100% | ✅ 100% | ✅ 100% |
| 主题应用 | ✅ 100% | ✅ 100% | - |
| 表单验证 | ✅ 100% | ✅ 100% | ✅ 100% |

### 9.3 测试优先级分布

| 优先级 | 描述 | 执行时机 |
|--------|------|----------|
| P0 | 核心功能，必须通过 | 每次构建必测 |
| P1 | 重要功能，建议覆盖 | 每次测试必测 |
| P2 | 一般功能，选择性覆盖 | 完整测试时覆盖 |

---

## 十、测试执行建议

### 10.1 冒烟测试

冒烟测试应覆盖以下P0用例，确保核心功能正常：
- TC-CAL-003：月薪类型转换为时薪
- TC-CAL-009：标准工作时间计算
- TC-CAL-016：各KPI等级系数验证
- TC-CAL-018：房租时亏计算
- TC-CAL-019：餐费时均成本计算
- TC-CAL-023：各评分等级系数验证
- TC-CAL-027：时间静止者成就
- TC-MAIN-004：有效数据验证通过
- TC-MAIN-008：结束时间验证
- TC-MAIN-009：休息摸鱼时间验证
- TC-REN-001：普通结果卡片渲染
- TC-INT-001：月薪转时薪完整流程

### 10.2 完整测试周期

完整测试周期应覆盖所有97个测试用例，建议按以下顺序执行：
1. 冒烟测试（12个P0用例）
2. 单元测试（52个用例）
3. 集成测试（14个用例）
4. 功能测试（20个用例）
5. 边界测试（9个用例）
6. 性能测试（2个用例）

### 10.3 回归测试

当代码发生变更时，应根据变更范围选择回归测试用例：
- **核心计算变更**：执行所有计算相关测试用例
- **UI渲染变更**：执行渲染相关测试用例
- **表单验证变更**：执行验证相关测试用例
- **整体发布**：执行完整测试周期

---

*文档编制日期：2025年12月27日*
*文档版本：1.0.0*
